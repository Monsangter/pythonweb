크롤링 기초
크롤링은 무엇이고 기초적 원리는 무엇인가


인터넷과 웹
웹서버와 디비
http와 소켓 
브라우저
웹앱과 api
크롤링 주의사항

-크롤링이란?
웹 크롤러는 조직적, 자동화된 방법으로 월드 와이드 웹을 탐색하는 컴퓨터 프로그램이다.

-크롤링의 역사
검색을 위해 크롤링이 나왔다.
검색엔진에서 검색어에 해당하는 글을 페이지에서 검색에 불러오는 것 처럼.
검색엔진은 크롤링을 통해 자기 서버로 가져온다.

-웹
페이지들이 거미줄같이 각각의 링크로 이루어져 있다.
크롤러는 현페이지에서 갈 수 있는 모든 페이지를 다 순회한다. 그페이지를 수집해 모두 가지고 있다, 분석해서
보여준다.
크롤러는 페이지를 다 본따서 긁어와서 인덱싱한다. 본따게 됨.
파싱은 더 좁은 범위로써 특정페이지에서 특정정보만 가지고 오고 싶을때. ex(네이버 금융페이지의 환율

-크롤링 활용처
사이트에서 원하는 데이터 추출
업무 자동화하기
알림받기
=========
인터넷 웹

-인터넷 하면 떠오르는 것
네이버, 구글과 같은 사이트
그리고 웹 브라우저.

핸드폰에서 와이파이 접속.
와이파이 신호를 통해 공유기. 모뎀(자그마한 라우터)에 연결
이게 지구 반대편에 있는 구글서버에 연결된다.
가는 과정은 바로 연결돼 있는게 아니라 라우터들이 네트워크 식으로
연결되어 있다.

이렇게 서버로부터 데이터를 받아와 보게 될텐데,  http로 보게된다.

크롬의 개발자도구로필요한 웹 지식과플로우들을볼 수 있다.

네트워크에서 녹화를 누르고 새로고침하면 엄청나게 많은 량의 통신을 볼 수있음.

왼쪽하단에 요청량과 용량을 볼 수 있음.
데이터는 많은량의 라우터를 거치기 때문에 작으면 작을 수록 더 빠르고
안전히 갈 수 있다.
데이터는 01 광신호기 때문에 어긋날 수 있고
이 측면에서도 작을 수록 안정성을 위해 좋음.

통신된 데이터를 확인해보면 헤더를 볼 수 있다.
헤더는 메타데이터 의미
request method채ㅐ

요청과 응답헤더도 있다.

accept에는 요청 형식
cookie에는 로그인 정보가 들어간다.

cookie 탈취도 가능.
refere 어떤 주소에서 접근했는가

user-agent 어떤 사용자가 어떤 기기를 통해 접근했는가

doc은 로딩되는 실제 페이지 전체를 의미함.

즉 우리가 리퀘스트라는 헤더를 주면 서버에서 response라는 스트림을 줌.
============
웹서버와 디비

페이지를 새로고침하면 서버와 통신을하게 되고 새로고침을 반복하면 서버에
무리가 간다.

디비는 웹서버의 역할에 핵심이다.

대표적 디비가 엑셀.
컬럼과 로우가 있다.

실제 웹사이트 이용시에는 

db - 서버(미들웨어) - 유저

중간에 서버가 있다.
실제적으론 라우터를 이용해 연결한다.

서버는 미리만들어논 템플릿에 db에서 불러온 정보를 활용해
렌더링한다.

서버는 CRUD를 활용해 데이터 입출력. 유저에게 어떻게 보기 좋게
만들어줄지 생각한다.

예를들어 서버는 유저에게 어떻게 보기 좋은 정보를 갖다줄지, 다양한 로직
을 활용해 정보를 가공하게 된다.

일반적으로 모바일 사이트는 담는 정보가 작기 때문에
로직이나 db가 적을 가능성이 크다. 모바일 크롤링이 좋음.

======

http?

ㅅ버에 요청

get
user-agent
host
accept-language
accept-encoding
connection

http/1.1 200 OK
user-agent
host
accept-language
accept-encoding
connection
content-type
content-length

http의 구성은
레퀘스트 라인
0개이상의 헤더
빈 라인
바디


request-line = Method sp Request-URI sp http-version crlf

메소드와 요청uri http버전 이렇게 새개로 이루어져 있다.

요청uri는 호스트와 조합됨.

메소드는 요청방법.

헤더는 앞부분
바디는 콜론뒤의 뒷부분

accept랭기지는 꼭 그언어로 받는건 아니지만 서버처리시 도움줌
accept encoding은 암호화. gzip, deflate
커넥션. 요청 유지. 속도처리 자원황룡 측면 중요

콘텐츠 타입. html요청을 할때 post는 보내는건데, 보내는 콘텐츠타입
데이터 바디가 무슨 타입이냐?컨텐츠타입에 값이 많이 필요시 콜론사용.

content-lenth 

빈라인

바디
데이터 바디가



============


정적크롤링
빠르고 간단한 크롤링

requests 라이브러리
xml,html,json,jsonp,binary
regex
beautifulsoup
css




동적크롤링
셀레늄을 통해 사용자가 접근할 수 있는 환경
눈에보이지 않는 페이지

broswer
selenium

 
